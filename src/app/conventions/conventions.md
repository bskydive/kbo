# Соглашения

## [Соглашения](/txt/conventions.md.html)

## [Соглашения про javaScript, DOM, BOM](/txt/conventions.js.md.html)

## [Соглашения про LESS/CSS](/txt/conventions.less.md.html)

## [Соглашения про Ангуляр](/txt/conventions.angular.md.html)

## [Соглашения про VUE](/txt/conventions.vue.md.html)

## [Соглашения - черновик](/txt/conventions.draft.md.html)

Предлагаю совместными усилиями навести порядок в нашем коде.
Это сделает нашу производительность труда чуть больше, чем сейчас, а также снизит объём работы.

## Цели соглашений

1. Удобство миграции кода. Необходимо облегчить процесс переноса кода между старым и новым дизайном/фреймворком.

1. Удобство отладки кода. Необходимо глядя в devTools сразу понимать из какого файла этот кусок кода, где он может находиться внутри файла.

1. Удобство чтения. Необходимо сокращать время поиска и анализа информации.
	При взгляде на переменную или функцию необходимо сразу понимать что она должна делать.

1. Удобство разработки. Необходимо использовать общепринятые шаблоны и практики, сокращать код.
	Меньше кода - меньше ошибок, конфликтов версий кода, быстрее чтение кода.
	Нежелательно сокращать переносы строк или названия, т.к. минификатор их и так уберёт, а скорость чтения кода упадёт.
	Максимальная длинна строк регулируется в соглашениях.

## Англо-русский словарь

Для улучшения взаимопонимания в команде и экономии времени на поиск.
Зачастую люди не понимают смысла английских слов, или не знают перевода русских.

1. issue - "суть" в прямом переводе, "задача" в контексте разработки. У этого слова нет более точного перевода, т.к. оно по-разному понимается во многих контекстах.
1. conventions - "соглашения"
1. collaboration | teamwork - "сотрудничество" в прямом переводе, "совместная работа" в контексте разработки
1. feature - "особенность" в прямом переводе, "полезная особенность" в контексте разработки
1. feedback - "отзыв" в прямом переводе, "обратная связь" в контексте разработки
1. hype - "ажиотаж"
1. merit - "заслуга"
1. prohibit, deny - "запрещать"
1. overwhelmed, impressed - "ошеломлённый"
1. keen, interested in - "заинтересован"
1. convince - "убеждать"
1. implicit - "неявный"
1. assertion - "утверждение"
1. intrinsic - "принадлежащий"
1. observable - "обозреватель" в прямом переводе, "сборщик" в контексте разработки
1. feedback - "отзыв" в прямом переводе, "оценка" в контексте
1. eagerly - "нетерпеливо" в прямом, "принудительно" в контексте
1. scope - "охват", "область видимости"
1. entity - "сущность", "экземпляр объекта"
1. binding - "связывание", "назначение"
1. callback - "возврат"
1. namespace - "пространство имён"
1. gullible - "доверчивый"
1. Roughly speaking - "грубо говоря"
1. bounds - "границы"
1. Intentional - "намеренный"
1. lack - "нехватка"
1. Thus - "соответственно"
1. crucial - "ключевой"
1. grasp - "ухватить суть" в прямом "усвоить" в контесте
1. peculiar - "характерный"
1. bears repeating - "основательно повторим"
1. conveys - "передавать"
1. infer - "предполагать"

## Шаблоны и практики

1. [DRY](https://ru.wikipedia.org/wiki/Don%E2%80%99t_repeat_yourself)
1. [KISS](https://ru.wikipedia.org/wiki/KISS_%28принцип%29)
1. [JSDOC](http://usejsdoc.org/)

## Соглашения с Бизнесом

1. Необходимо договариваться и фиксировать ограничения совестимости кода.
	При этом, необходимо обосновывать с точки зрения ЦА/Бизнеса ценность каждого параметра охвата, т.к. это сильно экономит время разработки.
	На живом проекте, при наличии метрик можно точно оценить потребность в ограничениях.

 	Например:
 	* iphone, android, desktop
 	* ios 10+, android6+, Windows7+
 	* chrome 59+, firefox 52+, ie 11+
 	* ширина дисплея: 375, 768, 992, 1200

## Организация кода

1. Используется единое пространство имён, чтобы понимать для каких компонентов в других видах файлов написан кусок кода.
	Все подписи коммитов, компоненты, переменные, папки, классы должны содержать одинаковые слова для обозначения одинаковых или взаимосвязанных элементов.
	Одинаковые слова должны быть описаны в справочнике, связывающем между собой бизнес-понятия, вёрстку, код, дизайн.
	Менеджер, дизайнер, программист и тестировщик должны одинаково понимать эти слова.

	Примеры:
	```
		modal-registration-recruiter
		profail-applicant-education
		landing-director-facts
		mainPage-publications
	```

1. Код организуется в иерархические папки-компоненты. Каждый компонент содержит js+less+jade код в одной папке.
	Внутри указываются относительные пути до файлов для удобства миграции кода.

1. Страница разбивается на блоки и компоненты. Общая задача разбивается на подзадачи по блокам и компонентам. Сначала делаем модуль с маршрутом и страницами-заглушками
	под каждую подзадачу, затем реализуем все компоненты, потом собираем блоки. На странице необходимо вставить все компоненты и блоки, вывести в консоль
	оповещения о старте init() каждого контроллера.	На странице-заглушке вывести в заголовках h4-h5 названия задач в JIRA, связанные с каждым компонентом,
	чтобы дизайнер мог после просмотра компонента сделать комментарии в нужной подзадаче.

1. Картинки хранятся в отдельной папке для всех картинок с подпапками по страницам/экранам

1. Шрифты хранятся в отдельной папке для всех шрифтов, с подпапками для каждого шрифта. В подпапке также хранится файл less для @font-face шрифта.

1. Необходимо убирать лишний код и комментарии при рефакторинге. Главные комментарии пишутся в jsDoc перед методами и в начале файла.
	* Если комментарии необходимо временно оставить, то заводим задачу в JIRA в истории про рефакторинг.
	* Указываем в задаче ссылку на место в коде с временным комментарием.
	* Указываем в комментарии в коде ссылку на задачу JIRA

## Управление задачами

1. фиксировать в соотв задаче jira временные решения до момента рефакторинга. Описывать файл, строку, приводить скрин кода для рефакторинга временного решения.
	Для этих задач есть общая история под версию 1.3 [Рефакторинг]()

1. Для каждого временного решения в коде указывать todo, а также ссылку на задачу в JIRA для рефакторинга

1. Каждая задача JIRA не должна превышать 8 часов в работе

1. Перед(!!!ПЕРЕД!!!) началом выполнения работы по задаче JIRA необходимо поставить оценку в story points.
	Это условная единица, которая при делении на фактически затраченное время позволяет делать более точные прогнозы по времени выполнения.

1. Для каждой задачи отпочковывается отдельная ветка в репозитории. Родительская ветка: release/dev

1. После выполнения какой-либо части работ обязательно делается commit и push в соответствующую ветку.

1. В комментарий к каждому коммиту обязательно пишется номер задачи и расположение изменений(блок/страница/модуль).
	После удаления ветки должен остаться не только номер задачи, который ещё надо найти и загрузить в браузере.
	Словесное описание позволяет быстро понять охват изменений даже при наведении на аннотации к коду.

	Пример:
	* PG-0000-landing-page-comfort
	* PG-0000-footer-icons-refactoring
	* PG-0000-modal-register-recruiter-fix

1. Замечания и вопросы по задачам делаются обязательно в задаче JIRA.

1. Длинные обсуждения ведутся в общих чатах по темам(front, backend, web-design, test).
	Это позволяет сохранить экспертизу, а также вмешиваться заинтересованным лицам *ДО* того, как произойдёт нечто неприятное.

1. Итоги обсуждения в общих чатах обязательно фиксируются в задаче JIRA.
	Обсуждать сразу весь пакет замечаний вместо беседы по отдельным блокам/задачам - значит терять время.
	Каждую задачу можно отправлять после обсуждения на тестирование или доработку конкретному сотруднику.
	Например, дизайнеру. После доработки в конкретной задаче появятся, например, новые исправленные макеты.
	Кроме этого, появятся трудозатраты, которые впоследствии помогут более точно прогнозировать сроки.
	Кроме прогноза бывает интересно узнать почему задача выполнялась так долго.

1. Если в результате выполнения задачи реализация отличается от ТЗ, это необходимо указать в комментариях, с указанием причин такого решения.
