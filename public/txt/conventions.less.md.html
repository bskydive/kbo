<h1 id="-less-css">Соглашения про LESS/CSS</h1>
<h2 id="-"><a href="/txt/conventions.md.html">Соглашения</a></h2>
<h2 id="-javascript-dom-bom"><a href="/txt/conventions.js.md.html">Соглашения про javaScript, DOM, BOM</a></h2>
<h2 id="-less-css"><a href="/txt/conventions.less.md.html">Соглашения про LESS/CSS</a></h2>
<h2 id="-"><a href="/txt/conventions.angular.md.html">Соглашения про Ангуляр</a></h2>
<h2 id="-vue"><a href="/txt/conventions.vue.md.html">Соглашения про VUE</a></h2>
<h2 id="-"><a href="/txt/conventions.draft.md.html">Соглашения - черновик</a></h2>
<h2 id="-">Формат кода</h2>
<ol>
<li>Отступы кодируются табуляцией, чтобы каждый мог установить комфортный ему размер отступов, не меняя код в репозитории.</li>
</ol>
<h2 id="-">Шрифты</h2>
<ol>
<li><p>Использовать шрифт iconfont из векторных svg изображений для отображения иконок там, где это возможно. Вектор экономит траффик, шрифт экономит и унифицирует код.</p>
</li>
<li><p>Шрифт необходимо модифицировать через icomoon app. Для этого необходимо сохранять не только шрифт, но и исходники.</p>
<ul>
<li>Выгрузить и распаковать самый поздний архив со шрифтом<ul>
<li>Проверить контрольные суммы файлов шрифтов в проекте и из архива. Они должны совпадать.</li>
<li><code>sha256sum -b src/assets/fonts/iconfont/*</code> </li>
<li><code>sha256sum -b designthings/шрифт/iconfont_2017.08.30_18.41_42_font/fonts/*</code></li>
<li>Если не совпали - ищи более свжий архив с исходниками или конвертируй шрифт в svg спрайт</li>
<li>Загружаем selection.json в <a href="https://icomoon.io/app/">icomoon</a>. Если json потерян, можно загрузить svg спрайт, но слетят все настройки и порядок иконок.</li>
<li><code>меню справа &quot;три палочки&quot; --&gt; remove set</code></li>
<li><code>меню вверху слева &quot;+&quot; --&gt; import icons</code></li>
</ul>
</li>
<li>Новые иконки необходимо подготовить в inkScape<ul>
<li>Высота иконки и документа 32px, положение иконки 0*0</li>
<li>Перед изменением размера иконки необходимо зафиксировать соотношение сторон - &quot;замочек&quot; между шириной и высотой в меню</li>
<li>Если иконка не квадратная, то будут проблемы с выравниванием по горизонтали.</li>
<li>Иконки должны быть объединены в один контур (ctrl+k). </li>
<li>После разгруппировки (shift+ctrl+g) контур не распадается на фигуры, их нельзя растащить мышкой.</li>
<li>Цвет заливки - чёрный #000000. Он будет изменяться при помощи CSS: color</li>
</ul>
</li>
<li>Для добавления новой иконки<ul>
<li><code>меню вверху слева &quot;+&quot; --&gt; import icons</code></li>
<li>Название иконки пишем через тире, без префикса <code>icon-</code>, т.к. он добалвяется автоматически</li>
</ul>
</li>
<li>Для удаления икноки её необходимо убрать из выделенных</li>
<li>Для выгрузки шрифта необходимо перейти на вкладку справа внизу <code>Generate Font</code><ul>
<li>Настройки шрифта - <code>&quot;шестерёнка&quot;</code> справа от <code>download</code> оставляем по-умолчанию, за исключением версии</li>
<li><code>&quot;Font name&quot;</code> - <code>iconfont</code></li>
<li><code>&quot;Class prefix&quot;</code> - <code>icon-</code></li>
<li><code>&quot;support ie8&quot;</code> - включаем для генерации ttf</li>
<li><code>&quot;Em square height&quot;</code> - <code>1024</code></li>
<li><code>&quot;Baseline Height&quot;</code> - <code>14.2857</code></li>
<li><code>&quot;Whitespace width&quot;</code> - <code>25</code></li>
<li><code>&quot;version&quot;</code> - <code>MMDD</code> <code>HHmm</code></li>
<li><code>&quot;generate variables for&quot;</code> - <code>less</code></li>
<li><code>&quot;CSS selector&quot;</code> - <code>use attribute selector</code></li>
<li>Имя файла для архива шрифтов: <code>iconfont_2017.08.30_18.41_42_font.zip</code> Указываем дату, время, количество иконок</li>
</ul>
</li>
<li>После выгрузки шрифтов архив необходимо сохранить в <a href="">репозитории git</a></li>
<li>Для выгрузки исходников - <code>genegrate svg and more</code> слева внизу<ul>
<li>Настройки исходников - <code>&quot;шестерёнка&quot;</code> справа от <code>download</code> оставляем по-умолчанию</li>
<li><code>Class prefix</code> - <code>icon-</code></li>
<li><code>use class selector</code> - <code>.icon</code></li>
<li><code>color</code> - <code>000000</code></li>
<li><code>Photoshop custom shapes</code> - <code>+</code></li>
<li><code>Tiles</code> - <code>+</code></li>
<li><code>Sprite columns</code> - <code>16</code></li>
<li><code>Margin</code> - <code>16</code></li>
<li>Имя файла для архива исходников: <code>iconfont_2017.08.30_18.41_42_icons.zip</code> Указываем дату, время, количество иконок</li>
</ul>
</li>
<li>После выгрузки исходников архив необходимо сохранить в <a href="">репозитории git</a></li>
<li><p>Для добавления шрифта в проект необходимо распаковать <code>iconfont*_font.zip</code></p>
<ul>
<li>Четрыре файла шрифтов из <code>iconfont_2017.08.30_18.41_42_font/fonts/</code> копируются с заменой в <code>web/assets/src/assets/less/fonts/</code></li>
<li>Меняем файл <code>web/assets/src/assets/less/fonts/iconfont.less</code> </li>
<li>Оставляем без изменений верхнюю строку <code>@icomoon-font-path : &quot;../../fonts/iconfont&quot;;</code> Остальное содержимое стираем</li>
<li>Добавляем содержимое из <code>iconfont_2017.08.30_18.41_42_font/fonts/variables.less</code> за исключением верхней строчки <code>@icomoon-font-path: &quot;fonts&quot;;</code></li>
<li>Добавляем содержимое из <code>iconfont_2017.08.30_18.41_42_font/fonts/style.less</code> за исключением верхней строчки <code>@import &quot;variables&quot;;</code></li>
<li>Для многоцветных иконок необходимо чуть доработать напильником, т.к. штатные margin и <code>icon- .path</code> не заработали</li>
<li>Если иконки только добавляли, и загружали через json, то достаточно добавить новые строчки про икноки из <code>variables.less</code> и <code>style.less</code>, а также меняем <code>@font-face</code> </li>
<li>Если иконки удаляли или рефакторили, то оставляем без изменений только верхние строки<pre><code class="lang-less">  [class$=&quot;-path1&quot;], [class*=&quot;-path1&quot;], [class$=&quot;-path2&quot;], [class*=&quot;-path2&quot;], [class$=&quot;-path3&quot;], [class*=&quot;-path3&quot;] {
       position: absolute;
   }
</code></pre>
</li>
<li>Меняем наззвания классов и конвертируем смещение<pre><code class="lang-less">  .icon-users .path2 {
      &amp;:before {
          content: @icon-users-path2;
          margin-left: -1.1259765625em;
          color: rgb(44, 47, 51);
      }
  }
</code></pre>
  на<pre><code class="lang-less">  .icon-users-path2 {
      &amp;:before {
          content: @icon-users-path2;
          left: -18px;
          color: rgb(44, 47, 51);
      }
  }
</code></pre>
</li>
<li>добавляем в jade стили всех частей иконки и структуру под <code>position:absolute</code><pre><code class="lang-jade">  .c-counter-icon
      .c-counter-icon-applicant
          .icon-users-path1
          .icon-users-path2
          .icon-users-path3
</code></pre>
</li>
<li><p>в less компонента добавляем</p>
<pre><code class="lang-less">      &amp;-icon {
          display: inline-block;
          vertical-align: text-bottom;//дополнительное выравнивание по вертикали
          margin-bottom: -2px;//дополнительное выравнивание по вертикали
          margin-right: 19px;
          position: relative;//опора для иконок
          width: 57px;

          &amp;-applicant {
              position: absolute;
              font-size: 32px;
              bottom: 37px;
              left: 9px;
          }
       }
</code></pre>
</li>
</ul>
</li>
<li>Пересобираем проект, проверяем наличие иконок        </li>
</ul>
</li>
</ol>
<h2 id="-">Приёмы программирования</h2>
<ol>
<li><p>Объявление кнопок через a или button</p>
<pre><code class="lang-jade">     a.c-bootstrap-button.c-bootstrap-button-large.c-bootstrap-button-white.c-bootstrap-button-white-filled(href=&#39;/soiskatel&#39; target=&#39;_blank&#39;) Создать резюме
         a.c-bootstrap-button.c-bootstrap-button-large.c-bootstrap-button-white(href=&#39;/rabotodatel&#39; target=&#39;_blank&#39;) Разместить вакансию
</code></pre>
</li>
<li><p>Файлы-переменные находятся только внутри использующей их папки-компонента для удобства миграции кода.</p>
</li>
<li><p>Директива JADE/PUG/LESS <code>import</code> используется только внутри папки-компонента. У компонента могут быть подпапки, например, для блоков страницы. 
 В них допустимо ссылаться на родительскую папку <code>../</code>, т.к. это неотделимые от компонента части. </p>
</li>
<li><p>Следует использовать JS/PUG/LESS отдельно и по назначению. Нежелательно менять CSS код внутри компонета при помощи JS. 
 Это существенно ограничивает используемые возможности CSS, затрудняет рефакторинг и миграцию кода. </p>
</li>
<li><p>Слова в названиях классов LESS разделяются <code>-</code>, &quot;шашлычный стиль&quot;, без прописных букв.</p>
</li>
<li><p>Названия классов должны начинаться с префикса <code>.c-</code>, названия идентификаторов с <code>.i-</code> для того, чтобы их можно было отличать 
 от классов библиотек jQuery/Bootstrap/Angular* при отладке.</p>
</li>
<li><p>Названия классов в less должны быть вложенными. Это экономит код LESS за счёт JADE, и упрощает рефакторинг за счёт наследования(перекрытия стилей). 
 90% кода вёрстки находится в LESS против 10% внутри JADE.</p>
<pre><code class="lang-less">     .c-landing-project {
         &amp;-comfort {
             &amp;-cards {

                 &gt; ul {
                     &gt; li {
                         &gt; a {
                             &amp;:hover {
                             }
                         }
                     }
                 }

                 .card {

                     &gt; h5 {
                         font-size: 15px;
                         line-height: 1.65;
                     }
                     .icon {
                         color: @var-color-bright-blue;

                         .podium {
                             @media (max-width: 767px) {
                                 font-size: 100px;
                             }

                             @media (min-width: 768px) {
                                 font-size: 100px;
                             }

                             @media (min-width: 992px) {
                                 font-size: 120px;
                             }
                         }
                     }
                 }
             }
         }
     }
</code></pre>
</li>
<li><p>Для размеров текста НЕ используем pt, используем px, т.к. размер текста сильно будет отличаться от картинки.</p>
</li>
<li><p>При определении стилей <code>&lt;a&gt;</code> внутри :hover необходимо также переопределть стили :focus, как минимум color и text-decoration, 
 иначе после перехода по сссылке, применятся унаследованные стили.</p>
</li>
<li><p>Для того, чтобы при изменении текста многоколоночная вёрстка карточек оставалась стабильной, необходимо:</p>
<ul>
<li>использовать одинаковую высоту и ширину каждой карточки.</li>
<li>задавать сокрытие лишнего текста - overflow:hidden; </li>
</ul>
</li>
<li><p>@media выражения крайне желательно помещать внутрь классов. Разделение стилей класса по нескольким местам в файле ухудшает удобство отладки. </p>
<h4 id="-">Хорошо:</h4>
<pre><code class="lang-less">     .с-main-page {
         &amp;-comfort {
             &amp;-header {
                 @media (max-width : 767px) {
                     padding-bottom : 21px;
                     font-size      : 12px;
                 }

                 @media (min-width : 768px) {
                     padding-bottom : 10px;
                 }

                 @media (min-width : 992px) {
                     padding-bottom : 30px;
                 }

                 @media (min-width : 1200px) {
                     padding-bottom : 33px;
                     font-size      : 18px;
                 }
             }
         }
     }
</code></pre>
<h4 id="-">Плохо:</h4>
<pre><code class="lang-less">     @media (max-width : 767px) {
         .с-main-page-comfort-header {
             padding-bottom : 21px;
             font-size      : 12px;
         }
     }

     @media (min-width : 768px) {
         .с-main-page-comfort-header {
             padding-bottom : 10px;
         }
     }

     @media (min-width : 992px) {
         .с-main-page-comfort-header {
             padding-bottom : 30px;
         }
     }

     @media (min-width : 1200px) {
         .с-main-page-comfort-header {
             padding-bottom : 33px;
             font-size      : 18px;
         }
     }
</code></pre>
</li>
<li><p>Ограничения для дизайна по ширине экрана(контента):</p>
<ul>
<li>375(315),768(708),992(932),1200(1140),</li>
<li>автоматические margin для промежуточных значений,</li>
<li>фон заполняет всю ширину экрана</li>
<li>для ширины 0-375 контент/кнопки растягивается автоматически на 100%</li>
</ul>
</li>
<li><p>Для @media устанавливается шаблон их использования, который подходит к обозначениям разных разрешений макетов.</p>
<h4 id="-">Названия макетов:</h4>
<ul>
<li>*-375.psd</li>
<li>*-768.psd</li>
<li>*-992.psd</li>
<li><p>*-1200.psd</p>
<h4 id="-">Полный шаблон:</h4>
<p>Здесь подразумевается наследование стилей, что сильно экономит время при первоначальной вёрстке сложных адаптивных блоков. 
При этом, важно следить за строгой иерархией классов, чтобы стили внутри медиавыражений корректно перекрывали друг друга. </p>
<pre><code class="lang-less">  &amp;-button{

      @media (max-width : 767px) {

      }

      @media (min-width : 768px) {

      }

      @media (min-width : 992px) {

      }

      @media (min-width : 1200px) {

      }
  }
</code></pre>
<h3 id="-">Примеры:</h3>
<h4 id="-">Полный шаблон:</h4>
<pre><code class="lang-less">  &amp;-button{

      @media (max-width : 767px) {//здесь исключение вместо min-width:376px, т.к. необходимо захватить от 0 до 375
          padding-bottom : 21px;
          font-size      : 12px;
      }

      @media (min-width : 768px) {//*-768.psd
          padding-bottom : 10px;
      }

      @media (min-width : 992px) {//*-992.psd
          padding-bottom : 30px;
      }

      @media (min-width : 1200px) {//*-1200.psd
          padding-bottom : 33px;
          font-size      : 18px;
      }
  }
</code></pre>
<h4 id="-">частичный шаблон:</h4>
<pre><code class="lang-less">  &gt; h3 {

      @media (max-width : 991px) {//*-375.psd, *-768.psd
          padding-top    : 47px;
      }

      @media (min-width : 992px) {//*-992.psd, *-1200.psd
          padding-top    : 49px;
      }
  }

  &gt; a {
      @media (max-width : 767px) {
          margin-top : 35px;
          font-size  : 12px;
      }

      @media (min-width : 768px) {
          margin-top : 33px;
          font-size  : 14px;
      }

      @media (min-width : 992px) {
          margin-top    : 35px;
      }    
  }
</code></pre>
<h4 id="-max-width-css-">При использовании max-width прийдётся использовать перевёрнутый шаблон, иначе не сработает CSS:</h4>
<pre><code class="lang-less">  &amp;-button{
      @media (min-width : 1200px) {//*-1200.psd

      }

      @media (max-width : 1199px) {//*-992.psd

      }

      @media (max-width : 991px) {//*-768.psd

      }

      @media (max-width : 767px) {//*-375.psd

      }
  }
</code></pre>
</li>
</ul>
</li>
<li><p>Избегать использования !important;. Стили зачастую накладываются в несколько слоёв, а !important; потребует рефакторить исходный компонент.</p>
</li>
<li><p>В случае необходимости перекрывать стили директивой !important, необходимо комментировать что и где перекоывается</p>
<pre><code class="lang-less">     a {
         &amp;:hover{
             text-decoration: none !important; //перекрытие унаследованного стиля src/less/base.less:81
         }
     }
</code></pre>
</li>
<li><p>Общие стили документа вынесены в bootstrap.less, префикс классов .c-bootstrap-*. Для главной страницы договорились не использовать стили фреймворков</p>
</li>
<li><p>Стандартные имена классов:</p>
<ul>
<li>section - секция блоков в jade, содержит min-height, background-*</li>
<li><em>-col-</em> - столбец для выравнивания нескольких элементов в одной строке. Не обязательно вкладывать в <em>-row-</em>, это самодокументирование кода.</li>
<li><em>-row-</em> - строка</li>
<li>Там, где допустимо использовать bootstrap grid, используем стандартные row/col</li>
</ul>
</li>
<li><p>Свойства пишутся без сокращений: background-color, background-width, padding-left</p>
</li>
<li><p>Стандартная структура главной страницы и лендингов. Заготовка для решения проблемы индексации SPA для SEO</p>
<pre><code class="lang-jade">     section.c-header-section
         include menu
         include header
     section.c-search-section
         include search
     section.c-vacancies-section.c-bootstrap-clearfix
         vacancies-short-list
     section.c-targets-section
         include targets
     section.c-publications-section
         include publications
     section.c-footer-section
         include footer
</code></pre>
</li>
<li><p>Стандартная структура элементов для стиля блока(pug/jade). Используется там, где нельзя использовать bootstrap grid стили container/row/col</p>
<pre><code class="lang-jade">     .c-bootstrap-row.c-bootstrap-container
         .c-header-col-left
             .c-header-stepanovv-img
     a(href=&#39;//stepanovv.ru&#39; target=&#39;_blank&#39;)
     img.c-header-stepanovv-img-large(src=&quot;/img/main-page/stepanovv.png&quot; alt=&#39;stepanovv&#39; title=&#39;stepanovv&#39;)
             .c-header-title 
     p Карьерный ресурс для руководителей, готовых сделать следующий шаг
         .c-header-col-left-buttons
             a.c-bootstrap-button.c-bootstrap-button-large.c-bootstrap-button-white.c-bootstrap-button-white-filled(href=&#39;/soiskatel&#39; target=&#39;_blank&#39;) Создать резюме
</code></pre>
</li>
<li><p>Указывать везде (<strong>min</strong>-width: 375/768/992/1200) - точно</p>
</li>
<li><p>Указывать везде (<strong>max</strong>-width: 374/767/991/1199) - на 1 меньше</p>
</li>
<li><p>Воздерживаться от использования position:absolute, предпочитать float. Это облегчает дальнейший рефакторинг.</p>
</li>
<li><p>Для изменения фона родителя при наведении на потомка необходимо использовать составные селекторы, т.к. фон потомков перекрывает фон родителя
 <a href="https://codepen.io/anon/pen/MVoyEP?editors=1100">https://codepen.io/anon/pen/MVoyEP?editors=1100</a></p>
<pre><code class="lang-pug">     .c-list-stacked
         .c-list-stacked-item
             //two below elements should change their bg-color to grey at hover on above element
             .c-list-stacked-item-name 1111
             .c-list-stacked-item-type 222
</code></pre>
<pre><code class="lang-stylus">     .c-list-stacked 
         font-size 14px
         display block

         &amp;-item 
             width 100%
             display inline-block
             position relative

             &amp;-name
                 color black
                 background-color white
                 width 49%
                 padding 6px
                 display inline-block

             &amp;-type 
                 color grey
                 width 49%
                 padding 6px
                 background-color lightgrey
                 display inline-block

             &amp;:hover &amp;-name, &amp;:hover &amp;-type
                 background-color red;
                 cursor pointer

</code></pre>
</li>
</ol>
